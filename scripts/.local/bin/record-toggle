#!/bin/env zsh

if pgrep -x "wf-recorder"; then
    pkill -INT -x wf-recorder
    notify-send -h string:wf-recorder:record -t 1000 "Finished Recording"
    exit 0
else
    notify-send -h string:wf-recorder:record -t 1000 "Recording in:" " 3 "
    sleep 1
    notify-send -h string:wf-recorder:record -t 1000 "Recording in:" " 2 "
    sleep 1
    notify-send -h string:wf-recorder:record -t 950 "Recording in:" " 1 "
    sleep 1
    dateTime=$(date +%m-%d-%Y-%H:%M:%S)
    wf-recorder -g "$(slurp)" -f "$HOME/Videos/$dateTime.mp4"
fi
